{"ast":null,"code":"import React,{useState}from'react';import{useNavigate,Link as RouterLink}from'react-router-dom';import{Box,Card,CardContent,TextField,Button,Typography,Link,Alert,CircularProgress,InputAdornment,IconButton}from'@mui/material';import{Visibility,VisibilityOff,Login as LoginIcon}from'@mui/icons-material';import{useAuth}from'../contexts/AuthContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=()=>{const[formData,setFormData]=useState({login:'',password:''});const[showPassword,setShowPassword]=useState(false);const[error,setError]=useState('');const[loading,setLoading]=useState(false);const{login}=useAuth();const navigate=useNavigate();const handleChange=e=>{setFormData({...formData,[e.target.name]:e.target.value});setError('');};const handleSubmit=async e=>{e.preventDefault();setLoading(true);setError('');if(!formData.login||!formData.password){setError('Please fill in all fields');setLoading(false);return;}try{const result=await login(formData);if(result.success){navigate('/dashboard');}else{setError(result.error||'Failed to connect to the system');}}catch(error){setError('An unexpected error occurred');}finally{setLoading(false);}};const togglePasswordVisibility=()=>{setShowPassword(!showPassword);};return/*#__PURE__*/_jsx(Box,{display:\"flex\",justifyContent:\"center\",alignItems:\"center\",minHeight:\"100vh\",bgcolor:\"background.default\",p:2,children:/*#__PURE__*/_jsx(Card,{sx:{maxWidth:400,width:'100%'},children:/*#__PURE__*/_jsxs(CardContent,{sx:{p:4},children:[/*#__PURE__*/_jsxs(Box,{textAlign:\"center\",mb:3,children:[/*#__PURE__*/_jsx(LoginIcon,{sx:{fontSize:48,color:'primary.main',mb:2}}),/*#__PURE__*/_jsx(Typography,{variant:\"h4\",gutterBottom:true,children:\"Connect to Casperdev\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",children:\"Sign in to access your connected workspace\"})]}),error&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",sx:{mb:2},children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Email or Username\",name:\"login\",value:formData.login,onChange:handleChange,margin:\"normal\",required:true,autoComplete:\"username\",autoFocus:true,disabled:loading}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Password\",name:\"password\",type:showPassword?'text':'password',value:formData.password,onChange:handleChange,margin:\"normal\",required:true,autoComplete:\"current-password\",disabled:loading,InputProps:{endAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"end\",children:/*#__PURE__*/_jsx(IconButton,{\"aria-label\":\"toggle password visibility\",onClick:togglePasswordVisibility,edge:\"end\",children:showPassword?/*#__PURE__*/_jsx(VisibilityOff,{}):/*#__PURE__*/_jsx(Visibility,{})})})}}),/*#__PURE__*/_jsx(Button,{type:\"submit\",fullWidth:true,variant:\"contained\",size:\"large\",sx:{mt:3,mb:2},disabled:loading,startIcon:loading?/*#__PURE__*/_jsx(CircularProgress,{size:20}):/*#__PURE__*/_jsx(LoginIcon,{}),children:loading?'Connecting...':'Connect'})]}),/*#__PURE__*/_jsx(Box,{textAlign:\"center\",mt:2,children:/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",children:[\"Don't have an account?\",' ',/*#__PURE__*/_jsx(Link,{component:RouterLink,to:\"/register\",color:\"primary\",children:\"Create connection\"})]})}),/*#__PURE__*/_jsxs(Box,{mt:3,pt:2,borderTop:1,borderColor:\"divider\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"textSecondary\",display:\"block\",textAlign:\"center\",children:\"Secure connection with JWT authentication\"}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"textSecondary\",display:\"block\",textAlign:\"center\",children:\"Real-time updates via WebSocket\"})]})]})})});};export default Login;","map":{"version":3,"names":["React","useState","useNavigate","Link","RouterLink","Box","Card","CardContent","TextField","Button","Typography","Alert","CircularProgress","InputAdornment","IconButton","Visibility","VisibilityOff","Login","LoginIcon","useAuth","jsx","_jsx","jsxs","_jsxs","formData","setFormData","login","password","showPassword","setShowPassword","error","setError","loading","setLoading","navigate","handleChange","e","target","name","value","handleSubmit","preventDefault","result","success","togglePasswordVisibility","display","justifyContent","alignItems","minHeight","bgcolor","p","children","sx","maxWidth","width","textAlign","mb","fontSize","color","variant","gutterBottom","severity","onSubmit","fullWidth","label","onChange","margin","required","autoComplete","autoFocus","disabled","type","InputProps","endAdornment","position","onClick","edge","size","mt","startIcon","component","to","pt","borderTop","borderColor"],"sources":["/workspace/client/src/components/Login.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate, Link as RouterLink } from 'react-router-dom';\nimport {\n  Box,\n  Card,\n  CardContent,\n  TextField,\n  Button,\n  Typography,\n  Link,\n  Alert,\n  CircularProgress,\n  InputAdornment,\n  IconButton\n} from '@mui/material';\nimport { Visibility, VisibilityOff, Login as LoginIcon } from '@mui/icons-material';\nimport { useAuth } from '../contexts/AuthContext';\n\nconst Login = () => {\n  const [formData, setFormData] = useState({\n    login: '',\n    password: ''\n  });\n  const [showPassword, setShowPassword] = useState(false);\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n  \n  const { login } = useAuth();\n  const navigate = useNavigate();\n\n  const handleChange = (e) => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n    setError('');\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setError('');\n\n    if (!formData.login || !formData.password) {\n      setError('Please fill in all fields');\n      setLoading(false);\n      return;\n    }\n\n    try {\n      const result = await login(formData);\n      if (result.success) {\n        navigate('/dashboard');\n      } else {\n        setError(result.error || 'Failed to connect to the system');\n      }\n    } catch (error) {\n      setError('An unexpected error occurred');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const togglePasswordVisibility = () => {\n    setShowPassword(!showPassword);\n  };\n\n  return (\n    <Box\n      display=\"flex\"\n      justifyContent=\"center\"\n      alignItems=\"center\"\n      minHeight=\"100vh\"\n      bgcolor=\"background.default\"\n      p={2}\n    >\n      <Card sx={{ maxWidth: 400, width: '100%' }}>\n        <CardContent sx={{ p: 4 }}>\n          <Box textAlign=\"center\" mb={3}>\n            <LoginIcon sx={{ fontSize: 48, color: 'primary.main', mb: 2 }} />\n            <Typography variant=\"h4\" gutterBottom>\n              Connect to Casperdev\n            </Typography>\n            <Typography variant=\"body2\" color=\"textSecondary\">\n              Sign in to access your connected workspace\n            </Typography>\n          </Box>\n\n          {error && (\n            <Alert severity=\"error\" sx={{ mb: 2 }}>\n              {error}\n            </Alert>\n          )}\n\n          <form onSubmit={handleSubmit}>\n            <TextField\n              fullWidth\n              label=\"Email or Username\"\n              name=\"login\"\n              value={formData.login}\n              onChange={handleChange}\n              margin=\"normal\"\n              required\n              autoComplete=\"username\"\n              autoFocus\n              disabled={loading}\n            />\n\n            <TextField\n              fullWidth\n              label=\"Password\"\n              name=\"password\"\n              type={showPassword ? 'text' : 'password'}\n              value={formData.password}\n              onChange={handleChange}\n              margin=\"normal\"\n              required\n              autoComplete=\"current-password\"\n              disabled={loading}\n              InputProps={{\n                endAdornment: (\n                  <InputAdornment position=\"end\">\n                    <IconButton\n                      aria-label=\"toggle password visibility\"\n                      onClick={togglePasswordVisibility}\n                      edge=\"end\"\n                    >\n                      {showPassword ? <VisibilityOff /> : <Visibility />}\n                    </IconButton>\n                  </InputAdornment>\n                )\n              }}\n            />\n\n            <Button\n              type=\"submit\"\n              fullWidth\n              variant=\"contained\"\n              size=\"large\"\n              sx={{ mt: 3, mb: 2 }}\n              disabled={loading}\n              startIcon={loading ? <CircularProgress size={20} /> : <LoginIcon />}\n            >\n              {loading ? 'Connecting...' : 'Connect'}\n            </Button>\n          </form>\n\n          <Box textAlign=\"center\" mt={2}>\n            <Typography variant=\"body2\">\n              Don't have an account?{' '}\n              <Link component={RouterLink} to=\"/register\" color=\"primary\">\n                Create connection\n              </Link>\n            </Typography>\n          </Box>\n\n          <Box mt={3} pt={2} borderTop={1} borderColor=\"divider\">\n            <Typography variant=\"caption\" color=\"textSecondary\" display=\"block\" textAlign=\"center\">\n              Secure connection with JWT authentication\n            </Typography>\n            <Typography variant=\"caption\" color=\"textSecondary\" display=\"block\" textAlign=\"center\">\n              Real-time updates via WebSocket\n            </Typography>\n          </Box>\n        </CardContent>\n      </Card>\n    </Box>\n  );\n};\n\nexport default Login;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}